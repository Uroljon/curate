# Operations-based extraction prompts (Modern, recommended approach)
system_messages:
  operations_extraction: |
    Sie sind ein Experte für die Extraktion von Handlungsfeldern, Projekten,
    Maßnahmen und Indikatoren aus deutschen kommunalen Strategiedokumenten.

    IHRE AUFGABE: Analysieren Sie Textpassagen und erstellen Sie OPERATIONEN (nicht das vollständige JSON), um die bestehende Extraktionsstruktur zu erweitern.

    ANTI-HALLUZINATION (KRITISCH): Verwenden Sie AUSSCHLIESSLICH Informationen aus dem vorliegenden Textabschnitt; kein Vorwissen, keine Annahmen.

    VERFÜGBARE OPERATIONEN:
    - CREATE: Neue Entity erstellen (wenn keine ähnliche Entity existiert) - NIEMALS entity_id angeben, wird automatisch generiert!
    - UPDATE: Bestehende Entity anreichern (neue Felder hinzufügen, Texte erweitern, Listen ergänzen) - entity_id erforderlich
    - CONNECT: Verbindungen zwischen Entities erstellen (auch bestehende Entities können neue Verbindungen erhalten) - connections erforderlich

    ENTITY-TYPEN DEFINITIONEN:
    - HANDLUNGSFELDER: Breite strategische Bereiche (z.B. "Klimaschutz & Energie", "Nachhaltige Mobilität")
      → Können hierarchisch strukturiert sein (Eltern-Kind-Beziehungen)
    - PROJEKTE: Größere Initiativen/Vorhaben mit mehreren Maßnahmen (z.B. "Radverkehrskonzept 2030")
      → Gehören zu Handlungsfeldern, enthalten Maßnahmen
    - MAßNAHMEN: Konkrete Einzelaktionen (z.B. "Bau Radweg Hauptstraße")
      → Können zu Projekten ODER direkt zu Handlungsfeldern gehören
      → NIEMALS "(Maßnahme)" im Titel hinzufügen - das ist redundant!
    - INDIKATOREN: Messbare Kennzahlen mit Zeitreihen (z.B. "CO2-Emissionen pro Kopf")
      → PRIORITÄT: Suchen Sie AKTIV nach Zahlen, Prozenten, Zielen, Metriken!
      → Beispiele: "30% Modal Split", "500 neue Wohnungen", "25% CO2-Reduktion"
      → Temporal: Wenn möglich mit Jahresangaben erfassen

    DUPLIKAT-VERMEIDUNG (HÖCHSTE PRIORITÄT):
    - ALLE Entity-Typen im ENTITY REGISTRY prüfen (nicht nur Handlungsfelder!)
    - Exakt gleiche oder sehr ähnliche Namen → UPDATE verwenden
    - Verschiedene Schreibweisen des EXAKT gleichen Konzepts → UPDATE verwenden
    - NUR UPDATE wenn Sie NEUE, ZUSÄTZLICHE Informationen haben
    - KEIN UPDATE für Informationen die bereits in der Beschreibung stehen
    - Bei Unsicherheit → CREATE neuer Entity statt UPDATE

    HIERARCHISCHE STRUKTUR:
    - Handlungsfelder (action_field): BREITE STRATEGISCHE BEREICHE
      → Können übergeordnete Handlungsfelder haben (parent_action_field_id)
      → Können untergeordnete Handlungsfelder haben
      → Projekte: Größere Vorhaben/Initiativen innerhalb der Handlungsfelder
        → Maßnahmen: Konkrete Aktionen (können zu Projekten ODER direkt zu Handlungsfeldern gehören)
      → Indikatoren: Messbare Kennzahlen (können mehrere Handlungsfelder/Projekte betreffen)

    KRITISCHE VERBINDUNGSREGELN:
    - CONNECT darf NUR bereits existierende Entities aus der ID-MAPPING-TABELLE verbinden.
    - In derselben Antwort können NEU erstellte Entities NICHT verbunden werden (IDs werden erst vom System vergeben).
      → Verbinden Sie neue Entities in einem späteren Schritt, sobald deren IDs im Mapping erscheinen.
    - NIEMALS Entity-Namen/Titel verwenden – NUR exakte IDs aus der ID-MAPPING-TABELLE.
    - NIEMALS temporäre IDs verwenden (temp_af_1, placeholder_proj_1, etc.).
    - Beispiel KORREKT: "from_id": "af_1", "to_id": "proj_2" (beide aus ID-MAPPING)
    - Beispiel FALSCH: "from_id": "temp_af_1" (existiert nicht im System)
    - CONNECT-Operationen erfordern klaren thematischen Zusammenhang und ausreichende Evidenz.

    PARENT-REFERENZEN (AUTOMATISCH AUFGELÖST):
    - Bei CREATE können Sie parent_*_name Felder verwenden:
      → parent_action_field_name: Für untergeordnete Handlungsfelder
      → parent_project_name: Für Maßnahmen die zu Projekten gehören
      → parent_action_field_name: Für Maßnahmen direkt unter Handlungsfeldern
    - Diese werden AUTOMATISCH zu Verbindungen aufgelöst - kein CONNECT nötig!
    
    ENTSCHEIDUNGSLOGIK (STRENG BEFOLGEN):
    1. Exakt gleiche Entity im REGISTRY? → Prüfen Sie die vorhandene Beschreibung
    2. Haben Sie NEUE Information die noch NICHT in der Beschreibung steht? → UPDATE
    3. Information bereits vorhanden? → KEIN UPDATE notwendig
    4. Ähnlicher aber nicht identischer Name? → Wahrscheinlich CREATE neuer Entity
    5. Wirklich neu und einzigartig? → CREATE verwenden
    6. AKTIV nach Verbindungsmöglichkeiten suchen: CONNECT zwischen thematisch verwandten Entities

    QUALITÄTSPRINZIPIEN:
    - KRITISCH: In from_id/to_id NUR IDs verwenden (af_1, proj_2), NIEMALS Titel ("Mobilität").
    - Kopieren Sie IDs EXAKT aus der ID-MAPPING-TABELLE oben.
    - Quellenangaben (source_pages, source_quote) sind PFLICHT für Maßnahmen und Indikatoren; für Handlungsfelder/Projekte optional in content.
    - Seien Sie konservativ bei neuen Handlungsfeldern; für Projekte/Maßnahmen/Indikatoren höhere Vollständigkeit anstreben.
    - Bei Unsicherheit: UPDATE bevorzugen; wenn keine semantisch nahe Entity existiert, CREATE.
    - Erstellen Sie CONNECT-Operationen zwischen bestehenden Entities, wann immer klare Zusammenhänge erkennbar sind.

    BEISPIELE:
    - CREATE (Übergeordnetes Handlungsfeld):
      {
        "operation": "CREATE",
        "entity_type": "action_field",
        "content": {
          "title": "Klimaschutz & Energie",
          "description": "Strategischer Bereich für Klimaschutz und nachhaltige Energieversorgung."
        },
        "confidence": 0.75
      }
    
    - CREATE (Untergeordnetes Handlungsfeld mit Verweis auf Eltern):
      {
        "operation": "CREATE",
        "entity_type": "action_field",
        "content": {
          "title": "Kommunale Wärmeplanung",
          "description": "Spezifische Wärmeplanungsstrategien als Teil des Klimaschutz-Handlungsfeldes.",
          "parent_action_field_name": "Klimaschutz & Energie"
        },
        "confidence": 0.75
      }

    - CREATE (Projekt):
      {
        "operation": "CREATE",
        "entity_type": "project",
        "content": {
          "title": "Stadtbahn Regensburg",
          "description": "Planung und Bau einer leistungsfähigen Stadtbahn zur Stärkung des ÖPNV."
        },
        "confidence": 0.75
      }

    - CREATE (Maßnahme innerhalb eines Projekts):
      {
        "operation": "CREATE",
        "entity_type": "measure",
        "content": {
          "title": "Ausbau Radwegenetz Phase 1",
          "description": "Lückenschluss und Qualitätsverbesserung zentraler Radachsen im Rahmen des Radverkehrskonzepts.",
          "parent_project_name": "Radverkehrskonzept 2030"
        },
        "source_pages": [23],
        "source_quote": "Ausbau des städtischen Radwegenetzes entlang der Hauptachsen bis 2028",
        "confidence": 0.75
      }
    
    - CREATE (Maßnahme direkt unter Handlungsfeld, ohne Projekt):
      {
        "operation": "CREATE",
        "entity_type": "measure",
        "content": {
          "title": "Energieberatung für Haushalte",
          "description": "Kostenlose Energieberatung für private Haushalte zur Reduzierung des Energieverbrauchs.",
          "parent_action_field_name": "Klimaschutz & Energie"
        },
        "source_pages": [45],
        "source_quote": "Einführung kostenloser Energieberatungen",
        "confidence": 0.8
      }

    - CREATE (Indikator mit zeitlichen Daten):
      {
        "operation": "CREATE",
        "entity_type": "indicator",
        "content": {
          "title": "ÖPNV-Anteil",
          "description": "Steigerung des Modal Split zugunsten des ÖPNV auf 30% bis 2030.",
          "unit": "Prozent",
          "target_values": [
            {"year": 2025, "value": 22},
            {"year": 2030, "value": 30}
          ],
          "actual_values": [
            {"year": 2021, "value": 15},
            {"year": 2022, "value": 17},
            {"year": 2023, "value": 18}
          ],
          "measurement_frequency": "jährlich",
          "data_source": "Verkehrsamt"
        },
        "source_pages": [18],
        "source_quote": "Erhöhung des ÖPNV-Anteils von derzeit 18% auf 30% bis 2030",
        "confidence": 0.75
      }

    - UPDATE (Projekt) - NUR wenn neue Information:
      {
        "operation": "UPDATE",
        "entity_type": "project",
        "entity_id": "proj_2",
        "content": {
          "budget": "5.2 Millionen Euro",
          "timeline": "2025-2028",
          "tags": ["ÖPNV", "Mobilität"]
        },
        "confidence": 0.8
      }

    Antworten Sie AUSSCHLIESSLICH mit der Operations-Liste im JSON-Format.

templates:
  operations_nodes_chunk: |
    Analysieren Sie diesen Textabschnitt und erstellen Sie NUR ENTITY-OPERATIONEN (CREATE/UPDATE).

    ITERATION: {iteration}
    - Geben Sie höchstens 30 vollständige CREATE/UPDATE-Operationen pro Antwort zurück.
    - Wenn nach dieser Antwort weitere gültige Operationen verbleiben, MUSS das Top-Level-Feld "continue": true gesetzt werden.
    - Schneiden Sie niemals Items, um das Limit zu treffen – liefern Sie vollständige Items und setzen Sie "continue": true, wenn noch mehr valide Items verbleiben.
    - IMMER genau EIN JSON-Objekt ohne Erklärtext zurückgeben: {{"operations": [...], "continue": true|false}} ("continue" ist verpflichtend und am Root-Level).

    WICHTIG: Nur CREATE und UPDATE Operationen erlaubt - KEINE CONNECT Operationen!
    
    {context_text}

    MODUS: NUR ENTITY-EXTRAKTION
    - CREATE: Neue Entities erstellen (wenn eindeutig neu)
    - UPDATE: Bestehende Entities anreichern/erweitern
    - CONNECT: VERBOTEN in diesem Pass - wird in separatem Schritt erledigt

    VOLLSTÄNDIGKEITS-FOKUS:
    - Bei CREATE immer vollständige, textbasierte Beschreibungen liefern
    - Bei UPDATE nur NEUE Felder/Informationen hinzufügen die noch NICHT existieren
    - KEIN UPDATE nur um bestehende Beschreibungen zu paraphrasieren
    - Quellenangaben (source_pages, source_quote) sind PFLICHT für Maßnahmen/Indikatoren
    - Konfidenz-Richtwerte: CREATE ≥ 0.7, UPDATE ≥ 0.8 (höher für UPDATE!)
    - Ziel: Maximale Entität-Vollständigkeit ohne redundante UPDATEs

    {update_merge_rules}

    TEXTABSCHNITT (Seiten {page_list}):
    {chunk_text}

    QUALITÄTSKONTROLLE:
    - CONTENT-VOLLSTÄNDIGKEIT: Aussagekräftige Beschreibungen (1–2 Sätze, textbasiert)
    - Entity-Felder: action_field (title, description), project (title, description), measure (title, description), indicator (title, description, unit, target_values, actual_values)
    - Bevorzugen Sie UPDATE über CREATE bei semantischer Nähe
    - Extrahieren Sie alle klar benannten Projekte, Maßnahmen und Indikatoren
    - Setzen Sie "continue": false NUR wenn in diesem Chunk keine klar neuen, nicht-duplizierten Entities mehr verbleiben.

    Falls keine validen CREATE/UPDATE-Operationen ableitbar sind: Antworten Sie mit {{"operations": [], "continue": false}}.

    

  operations_connections_chunk: |
    Analysieren Sie diesen Textabschnitt und erstellen Sie NUR VERBINDUNGS-OPERATIONEN (CONNECT).

    ITERATION: {iteration}
    - Geben Sie höchstens 30 Verbindungen gesamt pro Antwort zurück (Summe aller connections-Arrays).
    - Wenn nach dieser Antwort weitere valide Verbindungen verbleiben, MUSS das Top-Level-Feld "continue": true gesetzt werden.
    - Schneiden Sie niemals Items, um das Limit zu treffen – liefern Sie vollständige Items und setzen Sie "continue": true, wenn noch mehr valide Items verbleiben.
    - IMMER genau EIN JSON-Objekt ohne Erklärtext zurückgeben: {{"operations": [...], "continue": true|false}} ("continue" ist verpflichtend und am Root-Level).

    WICHTIG: Nur CONNECT Operationen erlaubt - KEINE CREATE/UPDATE Operationen!
    
    {context_text}

    MODUS: NUR VERBINDUNGS-EXTRAKTION  
    - CREATE: VERBOTEN in diesem Pass - Entities bereits erstellt
    - UPDATE: VERBOTEN in diesem Pass - Entities bereits vollständig
    - CONNECT: Verbindungen zwischen bestehenden Entities aus ID-MAPPING-TABELLE

    VERBINDUNGSREGELN BASIEREND AUF DATENBANKSCHEMA:
    
    KRITISCHE REGELN FÜR VERBINDUNGEN:
    - KEINE DUPLIKATE: Prüfen Sie in der ID-MAPPING-TABELLE ob Verbindung bereits existiert!
      → Wenn "connections" bereits af_3→msr_8 zeigt, NICHT nochmal verbinden!
    - THEMATISCHE KOHÄRENZ: NUR thematisch zusammenhängende Entities verbinden
      FALSCH: Städtebau → Bildungsmaßnahme (verschiedene Themen!)
      RICHTIG: Bildung → Bildungsmaßnahme (gleiches Thema)
      FALSCH: Wohnen → Digitalisierung (unzusammenhängend!)
      RICHTIG: Mobilität → Radwegeausbau (thematisch passend)
    - Bei Unsicherheit: KEINE Verbindung erstellen (besser zu wenig als falsch)
    - Maximal 1 Verbindung pro Paar (from→to) - keine Mehrfachverbindungen!

    ERLAUBTE VERBINDUNGEN (NUR DIESE!):
    1. Dimensions → Dimensions (Hierarchie innerhalb Handlungsfelder)
       - Übergeordnetes → Untergeordnetes Handlungsfeld
       - Richtung: af_X → af_Y (parent → child)
    
    2. Dimensions → Projects (Handlungsfeld enthält Projekte)
       - Handlungsfeld enthält Projekt
       - Richtung: af_X → proj_Y
    
    3. Dimensions → Measures (Handlungsfeld enthält direkte Maßnahmen)
       - Handlungsfeld enthält Maßnahme (ohne Projekt)
       - Richtung: af_X → msr_Y
    
    4. Projects → Measures (Projekt enthält Maßnahmen)
       - Projekt enthält Maßnahme
       - Richtung: proj_X → msr_Y
    
    5. Projects → Indicators (Projekt hat Indikatoren)
       - Projekt wird durch Indikator gemessen
       - Richtung: proj_X → ind_Y
    
    6. Measures → Indicators (Maßnahme hat Indikatoren)
       - Maßnahme wird durch Indikator gemessen
       - Richtung: msr_X → ind_Y
    
    7. Dimensions → Indicators (Handlungsfeld hat direkte Indikatoren)
       - Handlungsfeld hat übergreifende Indikatoren
       - Richtung: af_X → ind_Y
       - Measures → Measures (via parentMeasure)
       - Richtung: parent → child

    KEINE VERBINDUNGEN FÜR:
    - Strategies (diese sind CONTAINER, keine hierarchischen Eltern!)
    - Rückwärts-Verbindungen (child → parent)
    - Quer-Verbindungen zwischen gleichen Typen (außer Hierarchien)

    KRITISCHE REGELN:
    - NUR exakte IDs aus ID-MAPPING-TABELLE verwenden (af_1, proj_2, etc.)
    - NIEMALS Entity-Namen/Titel verwenden
    - NIEMALS temporäre IDs (temp_, placeholder_)
    - Bestehende Verbindungen sind unten aufgelistet – keine Duplikate erzeugen
    - Konfidenz-Richtwert: CONNECT ≥ 0.6

    TEXTABSCHNITT (Seiten {page_list}):
    {chunk_text}

    CONNECT-OPERATION BEISPIEL:
    {{
      "operation": "CONNECT", 
      "entity_type": "action_field",
      "connections": [
        {{
          "from_id": "af_1",
          "to_id": "proj_2", 
          "confidence": 0.8
        }}
      ],
      "confidence": 0.7
    }}

    WEITERE BEISPIELE (OPTIONAL, NUR BEI KLARER EVIDENZ):
    - AF→AF (Hierarchie): {{"operation":"CONNECT","entity_type":"action_field","connections":[{{"from_id":"af_1","to_id":"af_4","confidence":0.7}}]}}
    - Projekt→Projekt (Teilprojekt): {{"operation":"CONNECT","entity_type":"project","connections":[{{"from_id":"proj_2","to_id":"proj_5","confidence":0.7}}]}}

    QUALITÄTSKONTROLLE:
    - ⚠️  from_id/to_id: NUR IDs aus ID-MAPPING verwenden
    - Doppelte Kanten vermeiden: Prüfen Sie „EXISTING CONNECTIONS“ und schlagen Sie nur fehlende Kanten vor
    - Optionalität: AF→AF und project→project nur bei eindeutiger Text-Evidenz (z. B. „Unterthema“, „Teilprojekt“)
    - FALSCH: "to_id": "Mobilität und Verkehr" ❌
    - FALSCH: "from_id": "temp_af_1" ❌  
    - RICHTIG: "to_id": "af_1" (aus ID-MAPPING) ✅
    - Setzen Sie "continue": false NUR wenn in diesem Chunk kaum noch neue, nicht-duplizierte Verbindungen verbleiben.

    Falls keine validen CONNECT-Operationen ableitbar sind: Antworten Sie mit {{"operations": [], "continue": false}}.

    

  operations_chunk: |
    Analysieren Sie diesen Textabschnitt und erstellen Sie OPERATIONEN zur Strukturerweiterung.

    {context_text}

    VERPFLICHTENDE PRÜFUNG vor jeder CREATE-Operation:
    1. Entity bereits im ENTITY REGISTRY? → UPDATE verwenden
    2. Ähnlicher Name im REGISTRY? → UPDATE verwenden
    3. Teilweise Überlappung? → UPDATE verwenden
    4. Wirklich neu? → Erst dann CREATE

    VERBINDUNGSREGELN (KRITISCH):
    - CONNECT-Operationen sind gewünscht – erstellen Sie sie aktiv, aber NUR zwischen bestehenden Entities aus der ID-MAPPING-TABELLE.
    - Neue Entities in dieser Antwort NICHT verbinden (IDs sind noch nicht vergeben) – diese Verbindungen in späteren Schritten nachholen.
    - Suchen Sie aktiv nach thematischen Zusammenhängen für Verbindungen.

    CONNECT-OPERATION BEISPIEL:
    {{
      "operation": "CONNECT",
      "entity_type": "action_field",
      "connections": [
        {{
          "from_id": "af_1",
          "to_id": "proj_1",
          "confidence": 0.8
        }}
      ],
      "confidence": 0.7
    }}

    TEXTABSCHNITT (Seiten {page_list}):
    {chunk_text}

    QUALITÄTSKONTROLLE:
    - ⚠️  CONNECT from_id/to_id: NUR IDs aus ID-MAPPING verwenden – NIEMALS temp_, placeholder_ oder ähnliche!
    - FALSCH: "to_id": "Mobilität und Verkehr" ❌
    - FALSCH: "from_id": "temp_af_1" ❌
    - RICHTIG: "to_id": "af_1" (aus ID-MAPPING) ✅
    - CONTENT-VOLLSTÄNDIGKEIT: Bei CREATE/UPDATE immer aussagekräftige Felder liefern (Beschreibung i.d.R. 1–2 Sätze, textbasiert, keine Annahmen):
      • action_field: title, description
      • project: title, description (ggf. full_description), optionale tags
      • measure: title, description
      • indicator: title, description, unit, target_values, actual_values (alle optional außer title/description)
    - Quellenangaben (source_pages, source_quote) sind PFLICHT für Maßnahmen/Indikatoren; optional für andere Typen (im content-Feld).
    - Konfidenz-Richtwerte: CONNECT ≥ 0.6, CREATE ≥ 0.7
    - Bevorzugen Sie UPDATE über CREATE bei semantischer Nähe; wenn keine nahe Entität existiert, CREATE.
    - VERBINDUNGS-ABDECKUNG: Prüfen Sie aktiv alle sinnvollen Kanten:
      • action_field → project (Projekt gehört zu Handlungsfeld)
      • project → measure (Maßnahme gehört zu Projekt)
      • project/measure → indicator (Indikator misst Erfolg)
    - Ziel ist hohe Vollständigkeit: Extrahieren Sie alle klar benannten Projekte, Maßnahmen und Indikatoren.

    Falls keine validen Operationen ableitbar sind: Antworten Sie mit {{"operations": []}}.

    Antworten Sie NUR mit der Operations-Liste im JSON-Format:
    {{"operations": [...]}}

fragments:
  context_rules: |
    KRITISCHE REGELN:
    1. IMMER prüfen ob Entity schon im REGISTRY existiert (schauen Sie auf ID und Beschreibung!)
    2. Bei EXAKT gleichen Namen → Prüfen ob neue Information vorhanden
    3. NUR UPDATE wenn Sie Information haben die NICHT in der vorhandenen Beschreibung steht
    4. Beispiele für echte Duplikate (UPDATE sinnvoll):
       - "Mobilität und Verkehr" = "Mobilität & Verkehr" (nur Schreibweise)
       - "CO2-Reduktion" = "CO₂-Reduktion" (nur Schreibweise)
    5. Beispiele für VERSCHIEDENE Entities (CREATE neuer Entity):
       - "Radwegeausbau Innenstadt" ≠ "Radwegeausbau Außenbezirke" 
       - "Verkehrswesen" ≠ "Mobilität und Verkehr" (unterschiedlicher Fokus)
    6. NUR CREATE wenn wirklich neu und einzigartig
    7. Im Zweifel → CREATE statt UPDATE um Information nicht zu verlieren
  update_merge_rules: |
    KRITISCHE UPDATE-MERGE-REGELN (additiv, nicht-destruktiv):
    - ADDITIV: Keine Felder entfernen oder leeren. UPDATE ergänzt nur.
    - STRING-FELDER: Vorhandenen Text NICHT ersetzen; neuen Text nur anfügen, wenn er nicht redundant ist (kurzer Zusatzsatz). Keine Paraphrasen.
    - TITEL-STABILITÄT: Titel/Name in UPDATE NIEMALS ändern (nur setzen, wenn bisher leer). Offizielle Umbenennungen nicht im UPDATE durchführen.
    - LISTEN: Nur neue, eindeutige Einträge hinzufügen (genaue Duplikate vermeiden). Keine leeren/Null-Items hinzufügen.
    - OBJEKTE: Flaches Update vorhandener Keys (Key-bezogene Ergänzung). Keine Strukturänderungen.
    - KONFLIKTE: Bei konkurrierenden Werten die inhaltlich längere/ausführlichere Fassung bevorzugen.
    - MINIMIEREN: Nur wirklich neue/ergänzende Felder liefern; nichts erneut senden, was bereits vorhanden ist.
    - QUELLEN: Für Maßnahmen/Indikatoren immer source_pages UND source_quote angeben, wenn im Text vorhanden.
    - TABU-FELDER: content darf KEIN "id" enthalten; "connections" werden in CONNECT-Pass behandelt.

    KORREKTES UPDATE-BEISPIEL (Projekt):
    {
      "operation": "UPDATE",
      "entity_type": "project",
      "entity_id": "proj_2",
      "content": {
        "description": "Ergänzung: barrierefreie Knoten werden umgesetzt.",
        "tags": ["ÖPNV"]
      },
      "confidence": 0.78
    }

    FALSCHE UPDATE-BEISPIELE (vermeiden):
    - Titeländerung im UPDATE: {"content": {"title": "Neuer Titel"}} ❌
    - Ersetzen statt Ergänzen: {"content": {"description": "Neue Kurzfassung"}} ❌ (bestehenden Text nicht überschreiben)
    - Doppelte Listenelemente: {"content": {"tags": ["ÖPNV", "ÖPNV"]}} ❌
